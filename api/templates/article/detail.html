{% extends 'base/index.html' %}

{% block title %}
  {{ obj.name }} - {{ obj.category.name }} - 乐享资源库
{% endblock %}

{% block meta_description %}
  {{ obj.content|striptags|truncatechars:150 }}
{% endblock %}

{% block meta_keywords %}
  {{ obj.name }},{{ obj.category.name }}{% for tag in obj.tags.all %}
    ,{{ tag.name }}
  {% endfor %},学习资源，网盘资料，网盘资源
{% endblock %}

{% block og_title %}
  {{ obj.name }} - 乐享资源库
{% endblock %}

{% block og_description %}
  {{ obj.content|striptags|truncatechars:200 }}
{% endblock %}

{% block og_type %}
  article
{% endblock %}

{% block canonical_url %}
  {{ request.build_absolute_uri }}
{% endblock %}

{% block og_image %}
  {% if obj.cover_img %}
    {{ request.scheme }}://{{ request.get_host }}{{ MEDIA_URL }}{{ obj.cover_img.url }}
  {% else %}
    {{ block.super }}
  {% endif %}
{% endblock %}

{% block content %}
  <!-- 顶部导航 -->
  <div class="bg-white shadow-sm px-4">
    <div class="container mx-auto h-16 flex items-center justify-between">
      <div class="breadcrumbs text-sm">
        <ul>
          <li>
            <a href="/">首页</a>
          </li>
          <li>
            <a href="/">{{ obj.category.name }}</a>
          </li>
          <li>{{ obj.name }}</li>
        </ul>
      </div>
      <div class="flex items-center space-x-2">
        <button class="w-10 h-10 flex items-center justify-center text-gray-700 hover:text-primary transition-colors"><i class="iconfont icon-share text-2xl"></i></button>
      </div>
    </div>
  </div>
  <!-- 主内容区 -->
  <div class="mt-6">
    <!-- 资源基本信息区 -->
    <section class="bg-white rounded shadow-sm p-6 mb-6">
      <h2 class="text-2xl font-bold text-gray-900 mb-3">{{ obj.name }}</h2>
      <div class="flex flex-wrap items-center gap-4 mb-4">
        {% for tag in obj.tags.all %}
          <span class="px-3 py-1 bg-blue-50 text-primary text-sm rounded-full">{{ tag.name }}</span>
        {% endfor %}
      </div>
      <div class="flex items-center text-gray-500 text-sm mb-4">
        {% comment %} <div class="flex items-center mr-4">
          <i class="ri-user-line mr-1"></i>
          <span>陈思远</span>
        </div> {% endcomment %}
        <div class="flex items-center mr-4">
          <i class="ri-time-line mr-1"></i>
          <span>{{ obj.created_time|date:'Y-m-d' }} 上传</span>
        </div>
        <div class="flex items-center">
          <i class="ri-eye-line mr-1"></i>
          <span>{{ obj.view_count }} 次浏览</span>
        </div>
      </div>
    </section>
    <!-- 资源详细信息 -->
    <section class="bg-white rounded shadow-sm p-6 mb-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">资源详情</h3>
      <div id="resource-content">{{ obj.content|safe }}</div>
    </section>

    {% comment %} <!-- 相关推荐区 -->
    <section class="bg-white rounded shadow-sm p-6 mb-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">相关推荐</h3>
      <div class="overflow-x-auto pb-4">
        <div class="flex space-x-4 min-w-max">
          <div class="w-64 flex-shrink-0">
            <div class="bg-white rounded overflow-hidden border border-gray-100">
              <img src="https://public.readdy.ai/ai/img_res/9d67e79cece3f7bcb2d21da6e4b9c72a.jpg" alt="数据分析模板" class="w-full h-40 object-cover" />
              <div class="p-3">
                <h4 class="text-gray-900 font-medium text-sm mb-1 truncate">数据分析仪表盘模板</h4>
                <div class="flex items-center text-gray-500 text-xs">
                  <span>PPT模板</span>
                  <span class="mx-1">·</span>
                  <span>2025-03-28</span>
                </div>
              </div>
            </div>
          </div>
          <div class="w-64 flex-shrink-0">
            <div class="bg-white rounded overflow-hidden border border-gray-100">
              <img src="https://public.readdy.ai/ai/img_res/b1a5948ff56c1d4be682b5c3a6d4dbb9.jpg" alt="社媒营销模板" class="w-full h-40 object-cover" />
              <div class="p-3">
                <h4 class="text-gray-900 font-medium text-sm mb-1 truncate">社交媒体营销策略工具包</h4>
                <div class="flex items-center text-gray-500 text-xs">
                  <span>Excel模板</span>
                  <span class="mx-1">·</span>
                  <span>2025-03-15</span>
                </div>
              </div>
            </div>
          </div>
          <div class="w-64 flex-shrink-0">
            <div class="bg-white rounded overflow-hidden border border-gray-100">
              <img src="https://public.readdy.ai/ai/img_res/3d0f534bd7f732f91e74c9686f2676a2.jpg" alt="产品发布模板" class="w-full h-40 object-cover" />
              <div class="p-3">
                <h4 class="text-gray-900 font-medium text-sm mb-1 truncate">产品发布会演示模板</h4>
                <div class="flex items-center text-gray-500 text-xs">
                  <span>PPT模板</span>
                  <span class="mx-1">·</span>
                  <span>2025-03-10</span>
                </div>
              </div>
            </div>
          </div>
          <div class="w-64 flex-shrink-0">
            <div class="bg-white rounded overflow-hidden border border-gray-100">
              <img src="https://public.readdy.ai/ai/img_res/959ac030388667e6617896e5b6987aa0.jpg" alt="市场研究报告" class="w-full h-40 object-cover" />
              <div class="p-3">
                <h4 class="text-gray-900 font-medium text-sm mb-1 truncate">市场研究报告模板</h4>
                <div class="flex items-center text-gray-500 text-xs">
                  <span>Word模板</span>
                  <span class="mx-1">·</span>
                  <span>2025-02-25</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 评论区 -->
    <section class="bg-white rounded shadow-sm p-6 mb-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">用户评论</h3>
      <div class="mb-6">
        <div class="flex items-start mb-4">
          <textarea placeholder="分享你的想法..." class="w-full border border-gray-200 rounded p-3 text-gray-700 resize-none h-24 focus:border-primary transition-colors"></textarea>
        </div>
        <div class="flex justify-end">
          <button class="px-6 py-2 bg-primary text-white rounded-button hover:bg-blue-600 transition-colors whitespace-nowrap">发表评论</button>
        </div>
      </div>
      <div class="space-y-6">
        <div class="border-t border-gray-100 pt-4">
          <div class="flex items-start">
            <div class="w-10 h-10 flex-shrink-0 bg-gray-200 rounded-full overflow-hidden">
              <img src="https://public.readdy.ai/ai/img_res/8c309c638abacb2b2f17993fcf99a8c1.jpg" alt="用户头像" class="w-full h-full object-cover" />
            </div>
            <div class="ml-3 flex-1">
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-gray-900 font-medium">刘雨婷</h4>
                <span class="text-gray-500 text-sm">2025-04-06</span>
              </div>
              <p class="text-gray-700 mb-2">这个模板太实用了！我用它做了一份季度营销报告，领导非常满意。特别是数据分析工具，帮我节省了很多时间。强烈推荐给需要做营销策划的同事们。</p>
              <div class="flex items-center text-gray-500 text-sm">
                <button class="flex items-center hover:text-primary transition-colors">
                  <i class="ri-thumb-up-line mr-1"></i>
                  <span>12</span>
                </button>
                <button class="ml-4 hover:text-primary transition-colors">回复</button>
              </div>
            </div>
          </div>
        </div>
        <div class="border-t border-gray-100 pt-4">
          <div class="flex items-start">
            <div class="w-10 h-10 flex-shrink-0 bg-gray-200 rounded-full overflow-hidden">
              <img src="https://public.readdy.ai/ai/img_res/7bc64a27d56185b7e042c497423dda30.jpg" alt="用户头像" class="w-full h-full object-cover" />
            </div>
            <div class="ml-3 flex-1">
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-gray-900 font-medium">张志远</h4>
                <span class="text-gray-500 text-sm">2025-04-05</span>
              </div>
              <p class="text-gray-700 mb-2">模板内容很全面，但是有些图表在我的 Office 2019 上显示有问题，希望能提供兼容性更好的版本。</p>
              <div class="flex items-center text-gray-500 text-sm">
                <button class="flex items-center hover:text-primary transition-colors">
                  <i class="ri-thumb-up-line mr-1"></i>
                  <span>3</span>
                </button>
                <button class="ml-4 hover:text-primary transition-colors">回复</button>
              </div>

              <!-- 回复内容 -->
              <div class="mt-3 bg-gray-50 p-3 rounded">
                <div class="flex items-start">
                  <div class="w-8 h-8 flex-shrink-0 bg-gray-200 rounded-full overflow-hidden">
                    <img src="https://public.readdy.ai/ai/img_res/94e3de2918d0dd10c73cd5b7264b888f.jpg" alt="管理员头像" class="w-full h-full object-cover" />
                  </div>
                  <div class="ml-2 flex-1">
                    <div class="flex items-center justify-between mb-1">
                      <h4 class="text-gray-900 font-medium text-sm">
                        王晓梅
                        <span class="text-primary text-xs">管理员</span>
                      </h4>
                      <span class="text-gray-500 text-xs">2025-04-05</span>
                    </div>
                    <p class="text-gray-700 text-sm">您好，感谢您的反馈！我们将在下一版本中优化兼容性问题。同时，您可以尝试使用模板包中的"兼容模式"文件夹下的版本，或联系客服获取帮助。</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="border-t border-gray-100 pt-4">
          <div class="flex items-start">
            <div class="w-10 h-10 flex-shrink-0 bg-gray-200 rounded-full overflow-hidden">
              <img src="https://public.readdy.ai/ai/img_res/6237bc30a3a52e4e2e776ae212507e9b.jpg" alt="用户头像" class="w-full h-full object-cover" />
            </div>
            <div class="ml-3 flex-1">
              <div class="flex items-center justify-between mb-1">
                <h4 class="text-gray-900 font-medium">李明宇</h4>
                <span class="text-gray-500 text-sm">2025-04-03</span>
              </div>
              <p class="text-gray-700 mb-2">设计非常精美，内容也很专业。唯一的建议是希望能增加更多行业特定的案例分析，这样对不同行业的用户会更有帮助。</p>
              <div class="flex items-center text-gray-500 text-sm">
                <button class="flex items-center hover:text-primary transition-colors">
                  <i class="ri-thumb-up-line mr-1"></i>
                  <span>8</span>
                </button>
                <button class="ml-4 hover:text-primary transition-colors">回复</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section> {% endcomment %}
  </div>
{% endblock %}
